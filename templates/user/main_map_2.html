<html lang="ja">
<head>
    <title>MAP</title>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="js/jquery.darktooltip.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../../static/css/style.css">
    <style>
        .container{
            position: relative;
        }
        #pop{
            position: absolute;
            top: 400px;;
            left: 350px;; 
        }
        #openBlock{
            display:none;
            position: absolute;
        }
        .Bbule{ margin-right: 85%;}
    </style>
</head>
<body>
    <div class="container">
        <!-- map表示 -->
        <!-- Image Map Generated by http://www.image-map.net/ -->
        <img src="../static/images/map2.png" usemap="#image-map">
        <map name="image-map">
            <div id="stage">
                <area target="_self" alt="1-6" title="1-6" data-stage="1-6" data-url="{{ url_for('main_quiz6') }}" id="stage1_6" onclick="setBounds('stage1_6')" coords="118,552,252,620" shape="rect">
                <area target="_self" alt="1-7" title="1-7" data-stage="1-7" data-url="{{ url_for('main_quiz7') }}" id="stage1_7" onclick="setBounds('stage1_7')" coords="284,620,386,690" shape="rect">
                <area target="_self" alt="1-8" title="1-8" data-stage="1-8" data-url="{{ url_for('main_quiz8') }}" id="stage1_8" onclick="setBounds('stage1_8')" coords="421,570,538,645" shape="rect">
                <area target="_self" alt="1-9" title="1-9" data-stage="1-9" data-url="{{ url_for('main_quiz9') }}" id="stage1_9" onclick="setBounds('stage1_9')" coords="593,616,742,688" shape="rect">
                <area target="_self" alt="1-10" title="1-10" data-stage="1-10" data-url="{{ url_for('story_9') }}" id="stage1_10" onclick="setBounds('stage1_10')" coords="957,456,1193,604" shape="rect">
                <area target="_self" alt="scroll" title="scroll" href="{{ url_for('main_map') }}" coords="58,358,131,405,132,316" shape="poly">
            </div>
        </map>
​
        <!--キャラクター-->
        <div id="chara" style="position: absolute;">
            <a href="#" id="message">ステージをクリック！</a>
            <img src="../static/images/syukatsu_man.png" >
        </div>
​
    <a href="{{ url_for('findworktop')}}" class="na">戻る</a>
​
    </div>
​
    <script type="text/javascript">
        var flag = {{flag|tojson}};
        // キャラクター初期配置
        document.getElementById("chara").style.left = 140;
        document.getElementById("chara").style.top = 370;
        // キャラクター移動
        var hoge = document.getElementById('stage').getAttribute('data-stage');
        function setBounds(hoge){
            console.log(hoge)
            let url = document.getElementById(hoge).dataset.url
			switch(hoge){
                case 'stage1_6':
                    if(flag>=5){
                        document.getElementById("chara").style.left = 140;
                        document.getElementById("chara").style.top = 370;
                        document.getElementById("message").textContent = "1-6"
                        document.getElementById("message").setAttribute('href', url);
                        break
                    }
                case 'stage1_7':
                    if(flag>=6){
                        document.getElementById("chara").style.left = 280;
                        document.getElementById("chara").style.top = 440;
                        document.getElementById("message").textContent = "1-7"
                        document.getElementById("message").setAttribute('href', url);
                        break
                    }
                case 'stage1_8':
                    if(flag>=7){
                        document.getElementById("chara").style.left = 420;
                        document.getElementById("chara").style.top = 400;
                        document.getElementById("message").textContent = "1-8"
                        document.getElementById("message").setAttribute('href', url);
                        break
                    }
                case 'stage1_9':
                    if(flag>=8){
                        document.getElementById("chara").style.left = 610;
                        document.getElementById("chara").style.top = 440;
                        document.getElementById("message").textContent = "1-9"
                        document.getElementById("message").setAttribute('href', url);
                        break
                    }
                case 'stage1_10':
                    if(flag>=9){
                        document.getElementById("chara").style.left = 900;
                        document.getElementById("chara").style.top = 430;
                        document.getElementById("message").textContent = "1-10"
                        document.getElementById("message").setAttribute('href', url);
                        break
                    }
            }
		}
        // 戦闘画面移行
            $('#stage').click(function(){
                $('#openBlock').toggle();
            })
    </script>
</body>
</html>